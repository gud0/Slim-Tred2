# wet_haystack v0.6
# Custom full text index builder
# Robert Wetzlmayr
# http://awasteofwords.com/software/wet_haystack-textpattern-plugin

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMTp7czo3OiJ2ZXJzaW9uIjtzOjM6IjAuNiI7czo2OiJhdXRob3IiO3M6MTY6IlJvYmVy
dCBXZXR6bG1heXIiO3M6MTA6ImF1dGhvcl91cmkiO3M6NjU6Imh0dHA6Ly9hd2FzdGVvZndv
cmRzLmNvbS9zb2Z0d2FyZS93ZXRfaGF5c3RhY2stdGV4dHBhdHRlcm4tcGx1Z2luIjtzOjEx
OiJkZXNjcmlwdGlvbiI7czozMDoiQ3VzdG9tIGZ1bGwgdGV4dCBpbmRleCBidWlsZGVyIjtz
OjQ6InR5cGUiO2k6MztzOjU6ImZsYWdzIjtpOjE7czo0OiJuYW1lIjtzOjEyOiJ3ZXRfaGF5
c3RhY2siO3M6NDoiaGVscCI7czo0OTk2OiIKCTxoMz5QdXJwb3NlPC9oMz4KCgk8cD5UZXh0
cGF0dGVybiYjODIxNztzIGZ1bGwgdGV4dCBpbmRleCB1c2VzIHRoZSBhcnRpY2xlcyYjODIx
NzsgYm9keSBhbmQgdGl0bGUgY29udGVudHMgdG8gZmluZCBwcm9wZXIgbWF0Y2hlcyBmb3Ig
c2l0ZS1pbnRlcm5hbCBzZWFyY2hlcy48L3A+CgoJPHA+PHN0cm9uZz53ZXRfaGF5c3RhY2s8
L3N0cm9uZz4gYWxsb3dzIHNpdGUgcHVibGlzaGVycyB0byBtb2RpZnkgdGhpcyBkZWZhdWx0
IGJlaGF2aW91ciBieSBhZGRpbmcgYWRkaXRpb25hbCBhcnRpY2xlIGZpZWxkcyB0byB0aGUg
c2V0IG9mIGluZGV4ZWQgY29udGVudC48L3A+CgoJPGgzPlVzYWdlPC9oMz4KCgk8cD5OQjog
VGhpcyBwbHVnaW4gaXMgaW50ZW5kZWQgZm9yIFRleHRwYXR0ZXJuIDQuMi4wKy4gSXQgd2ls
bCBub3Qgd29yayB3aXRoIGVhcmxpZXIgdmVyc2lvbnMuICBZb3UgbmVlZCB0byBhY3F1aXJl
IHB1Ymxpc2hlciBwcml2aWxlZ2VzIHRvIGNoYW5nZSBhIHNpdGUmIzgyMTc7cyBmdWxsdGV4
dCBzZWFyY2ggc2V0dGluZ3Mgd2l0aCB0aGlzIHBsdWdpbi48L3A+CgoJPGg0PkJ1aWxkaW5n
IGEgY3VzdG9tIGZ1bGx0ZXh0IGluZGV4PC9oND4KCgk8dWw+Cgk8bGk+R28gdG8gdGhlIDxh
IGhyZWY9Ij9ldmVudD1wbHVnaW5fcHJlZnMud2V0X2hheXN0YWNrIj53ZXRfaGF5c3RhY2sg
b3B0aW9uczwvYT4gcGFuZWwuPC9saT4KCQk8bGk+Q2hlY2sgYWxsIGFydGljbGUgZmllbGRz
IHlvdSB3YW50IHRvIGluY2x1ZGUgaW4gdGhlIGZ1bGwgdGV4dCBpbmRleC48L2xpPgoJPC91
bD4KCTx1bD4KCTxsaT5IaXQgJiM4MjIwO1NhdmUmIzgyMjE7IGFuZCB3YWl0IGZvciB0aGUg
ZGF0YWJhc2UgdG8gcmVpbmRleCB5b3UgY3VycmVudCBzaXRlJiM4MjE3O3MgY29udGVudC4g
RGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgYW5kIGxlbmd0aCBvZiB5b3VyIGFydGljbGVzLCB0
aGlzIG1heSB0YWtlIGEgd2hpbGUuCgoJPHA+PHN0cm9uZz53ZXRfaGF5c3RhY2s8L3N0cm9u
Zz4gbmVlZHMgbm90IGJlIGtlcHQgaW5zdGFsbGVkIG9uY2UgdGhlIGN1c3RvbSBmdWxsdGV4
dCBpbmRleCBoYXMgYmVlbiBjcmVhdGVkLjwvcD4KCgk8aDQ+UmVtb3ZpbmcgYW4gb2Jzb2xl
dGUgY3VzdG9tIGZ1bGx0ZXh0IGluZGV4PC9oND4KCgk8cD48c3Ryb25nPndldF9oYXlzdGFj
azwvc3Ryb25nPiBuZWVkcyBvbmUgYWRkaXRpb25hbCBkYXRhYmFzZSBpbmRleCBmb3IgaXRz
IG9wZXJhdGlvbiwgd2hpY2ggaXQgY29udGludWVzIHRvIHVzZSBhcyBsb25nIGFzIHlvdSBt
b2RpZnkgVGV4dHBhdHRlcm4mIzgyMTc7cyBkZWZhdWx0IGZ1bGx0ZXh0IGluZGV4IHNldHRp
bmdzLiBUaGlzIGN1c3RvbSBmdWxsdGV4dCBpbmRleCB3aWxsIGJlIGRlbGV0ZWQgd2hlbiB0
aGUgY3VzdG9taXNlZCBzZXR0aW5nIG1hdGNoZXMgVGV4dHBhdHRlcm4mIzgyMTc7cyBkZWZh
dWx0IHNldHRpbmcgKGkuZS4gJiM4MjIwO1RpdGxlJiM4MjIxOyBhbmQgJiM4MjIwO0JvZHkm
IzgyMjE7IGFyZSB0aGUgc29sZWx5IGNoZWNrZWQgcHJvcGVydGllcykuPC9wPgoKCTxoMz5B
ZGRpdGlvbmFsIGluZm9ybWF0aW9uPC9oMz4KCgk8cD5WaXNpdCB0aGUgPGEgaHJlZj0iaHR0
cDovL2F3YXN0ZW9md29yZHMuY29tL3NvZnR3YXJlL3dldF9oYXlzdGFjay10ZXh0cGF0dGVy
bi1wbHVnaW4iPndldF9oYXlzdGFjayBkb2N1bWVudGF0aW9uIHBhZ2U8L2E+LjwvcD4KCgk8
aDM+TGljZW5jZTwvaDM+CgoJPHA+VGhpcyBwbHVnaW4gaXMgcmVsZWFzZWQgdW5kZXIgdGhl
IDxhIGhyZWY9Imh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwudHh0Ij5HbnUgR2Vu
ZXJhbCBQdWJsaWMgTGljZW5jZTwvYT4uPC9wPgoKCgogPGg0PkZpbmQgdGhpcyB1c2VmdWw/
PC9oND4KPHA+U2hvdyB5b3VyIGFwcHJlY2lhdGlvbiBhbmQgc3VwcG9ydCBmdXR1cmUgZGV2
ZWxvcG1lbnQgb2YgdGhpcyBwbHVnaW4gYnkgYSBzbWFsbCBkb25hdGlvbi4gVGhhbmsgeW91
ITwvcD4KPGZvcm0gYWN0aW9uPSJodHRwczovL3d3dy5wYXlwYWwuY29tL2NnaS1iaW4vd2Vi
c2NyIiBtZXRob2Q9InBvc3QiPgo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjbWQiIHZh
bHVlPSJfcy14Y2xpY2siIC8+CjxpbnB1dCB0eXBlPSJpbWFnZSIgc3JjPSJodHRwczovL3d3
dy5wYXlwYWwuY29tL2VuX1VTL2kvYnRuL3gtY2xpY2stYnV0MDQuZ2lmIiBib3JkZXI9IjAi
IG5hbWU9InN1Ym1pdCIgYWx0PSJNYWtlIHBheW1lbnRzIHdpdGggUGF5UGFsIC0gaXQncyBm
YXN0LCBmcmVlIGFuZCBzZWN1cmUhIiAvPgo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJl
bmNyeXB0ZWQiIHZhbHVlPSItLS0tLUJFR0lOIFBLQ1M3LS0tLS1NSUlIc1FZSktvWklodmNO
QVFjRW9JSUhvakNDQjU0Q0FRRXhnZ0V3TUlJQkxBSUJBRENCbERDQmpqRUxNQWtHQTFVRUJo
TUNWVk14Q3pBSkJnTlZCQWdUQWtOQk1SWXdGQVlEVlFRSEV3MU5iM1Z1ZEdGcGJpQldhV1Yz
TVJRd0VnWURWUVFLRXd0UVlYbFFZV3dnU1c1akxqRVRNQkVHQTFVRUN4UUtiR2wyWlY5alpY
SjBjekVSTUE4R0ExVUVBeFFJYkdsMlpWOWhjR2t4SERBYUJna3Foa2lHOXcwQkNRRVdEWEps
UUhCaGVYQmhiQzVqYjIwQ0FRQXdEUVlKS29aSWh2Y05BUUVCQlFBRWdZQWhWeVgrUGZVT2Nq
amRqYUIvazM5WWFoWFhtbHJNMXo4amg1QWpNYUJIOG9FbTJwaHJsSTluRWllR0xsUmhicC9x
NmJkZ1M4UWtlWWVxQ3BnOTJGVTNXZ2wrOVI3N213OUlUQzFPQkQveGlJZkhHV3dIWTZyYjhu
bUlkcWJoaEhRTk9YenJTdUUrWXFBZmU1NjNKWWkzNEVEcjloUExvQ1VHSkY1ZldoK2RXakVM
TUFrR0JTc09Bd0lhQlFBd2dnRXRCZ2txaGtpRzl3MEJCd0V3RkFZSUtvWklodmNOQXdjRUNC
SnRxVGtFMzZQcWdJSUJDTERkdjNlUTZXcmlaaXBjT2R5SkpJN0t4NzRDOFVjRFBmMDNWbW9F
RWU1eURZR2Y1Q3pmbjhzZ2lJUmpGK3N6amNnTFBqZmtTeHh5NUtjQ2JENlB4M1d3YmNUeEJF
anVvbDd6UDRBRnBtalVLNnd5S2NFRDR1cWdYWlJ1OWVESVM4eHVOcmwxK08zYmNwVWsvTk12
SmZwRDB6SkZpWEk0bC81THVGd29ta3l3ekk4aFdmN2N2SDBjSDUwOUREamx4TEMrSlJ5L2RS
SFlwR0xSekJtQk0zS0xIaURqQkQ2QVlCZjlPdkk1elRrK1RLT0d3cVNrTjE4SW0wT082SUhh
YXNHQjN4dE1ZVHNzU3c2ZVVFbUNYTjdZNjlTMVFxV3JaODJCdElHSFdEbzdIbzl4S3hGU0Jq
MjdaL1NNYnZaNTAwai9sbnYvd0tSOEU0Y2xucmFQQzhKRHZtVWFJcUhqRXFDQ0E0Y3dnZ09E
TUlJQzdLQURBZ0VDQWdFQU1BMEdDU3FHU0liM0RRRUJCUVVBTUlHT01Rc3dDUVlEVlFRR0V3
SlZVekVMTUFrR0ExVUVDQk1DUTBFeEZqQVVCZ05WQkFjVERVMXZkVzUwWVdsdUlGWnBaWGN4
RkRBU0JnTlZCQW9UQzFCaGVWQmhiQ0JKYm1NdU1STXdFUVlEVlFRTEZBcHNhWFpsWDJObGNu
UnpNUkV3RHdZRFZRUURGQWhzYVhabFgyRndhVEVjTUJvR0NTcUdTSWIzRFFFSkFSWU5jbVZB
Y0dGNWNHRnNMbU52YlRBZUZ3MHdOREF5TVRNeE1ERXpNVFZhRncwek5UQXlNVE14TURFek1U
VmFNSUdPTVFzd0NRWURWUVFHRXdKVlV6RUxNQWtHQTFVRUNCTUNRMEV4RmpBVUJnTlZCQWNU
RFUxdmRXNTBZV2x1SUZacFpYY3hGREFTQmdOVkJBb1RDMUJoZVZCaGJDQkpibU11TVJNd0VR
WURWUVFMRkFwc2FYWmxYMk5sY25Sek1SRXdEd1lEVlFRREZBaHNhWFpsWDJGd2FURWNNQm9H
Q1NxR1NJYjNEUUVKQVJZTmNtVkFjR0Y1Y0dGc0xtTnZiVENCbnpBTkJna3Foa2lHOXcwQkFR
RUZBQU9CalFBd2dZa0NnWUVBd1VkTzNmeEV6RXRjbkk3WktaTDQxMlh2WlB1Z29uaTdpN0Q3
cHJDZTBBdGFIVGM5N0NZZ203TnNBdEp5eE5MaXhtaExWOHB5SUVhaUhYV0FoOGZQS1crUjAx
NytFbVhycjlFYXF1UG1zVnZUeXdBQUUxUE1OT0txbzJrbDRHeGl6OXpacUlhak9tMWZaR1dj
R1MwZjVKUTJrQnFOYnZiZzIvWmErR0ovcXdVQ0F3RUFBYU9CN2pDQjZ6QWRCZ05WSFE0RUZn
UVVscDk4dThadkY3MVpQMUxYQ2h2c0VOWmtsR3N3Z2JzR0ExVWRJd1NCc3pDQnNJQVVscDk4
dThadkY3MVpQMUxYQ2h2c0VOWmtsR3VoZ1pTa2daRXdnWTR4Q3pBSkJnTlZCQVlUQWxWVE1R
c3dDUVlEVlFRSUV3SkRRVEVXTUJRR0ExVUVCeE1OVFc5MWJuUmhhVzRnVm1sbGR6RVVNQklH
QTFVRUNoTUxVR0Y1VUdGc0lFbHVZeTR4RXpBUkJnTlZCQXNVQ214cGRtVmZZMlZ5ZEhNeEVU
QVBCZ05WQkFNVUNHeHBkbVZmWVhCcE1Sd3dHZ1lKS29aSWh2Y05BUWtCRmcxeVpVQndZWGx3
WVd3dVkyOXRnZ0VBTUF3R0ExVWRFd1FGTUFNQkFmOHdEUVlKS29aSWh2Y05BUUVGQlFBRGdZ
RUFnVjg2VnBxQVd1WHZYNk9ybzRxSjF0WVZJVDVEZ1dwRTY5MkFnNDIySDd5UklyLzlqL2lL
RzRUaGlhL09mbHg0VGRMK0lGSkJBeVBLOXY2elpOWnRCZ1BCeW5YYjA0OGhzUDE2bDJ2aTBr
NVEySktpUERzRWZCaEdJK0hueExYRWFVV0FjVmZDc1FGdmQyQTFzeFJyNjdpcDV5Mnd3QmVs
VWVjUDNBakorWWN4Z2dHYU1JSUJsZ0lCQVRDQmxEQ0JqakVMTUFrR0ExVUVCaE1DVlZNeEN6
QUpCZ05WQkFnVEFrTkJNUll3RkFZRFZRUUhFdzFOYjNWdWRHRnBiaUJXYVdWM01SUXdFZ1lE
VlFRS0V3dFFZWGxRWVd3Z1NXNWpMakVUTUJFR0ExVUVDeFFLYkdsMlpWOWpaWEowY3pFUk1B
OEdBMVVFQXhRSWJHbDJaVjloY0dreEhEQWFCZ2txaGtpRzl3MEJDUUVXRFhKbFFIQmhlWEJo
YkM1amIyMENBUUF3Q1FZRkt3NERBaG9GQUtCZE1CZ0dDU3FHU0liM0RRRUpBekVMQmdrcWhr
aUc5dzBCQndFd0hBWUpLb1pJaHZjTkFRa0ZNUThYRFRBMU1USXdPREV4TkRVMU5Wb3dJd1lK
S29aSWh2Y05BUWtFTVJZRUZBcHZNYzJmWnVDK1dhTnZrRVM0Yzl2NElEdDdNQTBHQ1NxR1NJ
YjNEUUVCQVFVQUJJR0FGTUtXeDMvSUc0TFpON0I0NVJGSzhscXgvN2UxV0NqUWZENTZpdDZL
RHVJV2svNmp4dHZRYjFRQjQzREJGY1p2emlRK2piMjF4OFJCTW5KQldIaUFlR3QvWlphMFBJ
aFUwNHRUM1ZyZUFpd3ZIQXNvUTlBSjlhYjROYTRCaDJPWnNWYzdxM3FsTHZYbUFNRm1ORmRZ
Z0ZPWXdHcXBjeXF5RG5LalpLZmJBVU09LS0tLS1FTkQgUEtDUzctLS0tLSIvPgo8L2Zvcm0+
IjtzOjQ6ImNvZGUiO3M6NDgwNDoiCmdsb2JhbCAkdGV4dGFycmF5OwoKLyoqCiAqICBVc2Vy
LWVkaXRhYmxlIHN0cmluZ3MKICovCiR0ZXh0YXJyYXlbJ3dldF9oYXlzdGFjayddID0gJ0Z1
bGx0ZXh0IEluZGV4JzsKJHRleHRhcnJheVsnd2V0X2hheXN0YWNrX3NlbGVjdF9jb2x1bW5z
J10gPSAnU2VsZWN0IHNlYXJjaGFibGUgY29sdW1ucyc7CiR0ZXh0YXJyYXlbJ3dldF9oYXlz
dGFja19wbGVhc2Vfd2FpdCddID0gJ1BsZWFzZSB3YWl04oCmJzsKCi8vID09IFNUT1AgRURJ
VElORyEgPT0KCi8vIEhvb2sgaW50byB0aGUgYWRtaW4gc2lkZSBvZiBoaWdobHkgcHJpdmls
ZWdlZCB1c2VycwphZGRfcHJpdnMoJ3dldF9oYXlzdGFjaycsICcxJyk7CmFkZF9wcml2cygn
cGx1Z2luX3ByZWZzLndldF9oYXlzdGFjaycsICcxJyk7CnJlZ2lzdGVyX2NhbGxiYWNrKCd3
ZXRfaGF5c3RhY2tfdWknLCAncGx1Z2luX3ByZWZzLndldF9oYXlzdGFjaycpOwpyZWdpc3Rl
cl9jYWxsYmFjaygnd2V0X2hheXN0YWNrX3N0eWxlJywgJ2FkbWluX3NpZGUnLCAnaGVhZF9l
bmQnKTsKcmVnaXN0ZXJfY2FsbGJhY2soJ3dldF9oYXlzdGFja19iaHZyJywgJ2FkbWluX3Np
ZGUnLCAnYm9keV9lbmQnKTsKCi8qKgogKiBBZG1pbiBzaWRlIFVJCiAqLwpmdW5jdGlvbiB3
ZXRfaGF5c3RhY2tfdWkoJGV2ZW50LCAkc3RlcCkKewogIAlnbG9iYWwgJHByZWZzOwoKCS8v
IG5ldyBmdWxsdGV4dCBpbmRleCdzIGtleSBuYW1lCgkkd2V0X2hheXN0YWNrX2tleV9uYW1l
ID0gJ3dldF9oYXlzdGFjayc7CgogIAkvLyBkZWZhdWx0IFRYUCBmdWxsdGV4dCBpbmRleAog
IAkkZGVmYXVsdF9jb2xzID0gYXJyYXkoJ1RpdGxlJywgJ0JvZHknKTsKCiAgCSRjdXN0b21m
aWVsZHMgPSBhcnJheSgpOwogIAkkbWF4X2NmID0gZ2V0X3ByZWYoJ21heF9jdXN0b21fZmll
bGRzJywgMTApOwoJZm9yICgkaSA9IDE7ICRpIDw9ICRtYXhfY2Y7ICRpKyspIHsKICAJCWlm
ICghZW1wdHkoJHByZWZzWydjdXN0b21fJy4kaS4nX3NldCddKSkgewoJCQkkY3VzdG9tZmll
bGRzWydjdXN0b21fJy4kaV0gPSAkcHJlZnNbJ2N1c3RvbV8nLiRpLidfc2V0J107CgkJfQoJ
fQoKICAJLy8gYSBtYXAgb2YgZGIgY29sdW1ucyB3aGljaCBtYXkgcGFydGljaXBhdGUgaW4g
YSBmdWxsdGV4dCBpbmRleCwgYW5kIHRoZWlyIFVJIG5hbWVzLgogIAkkY29sdW1ucyA9IGFy
cmF5KAogIAkJJ0F1dGhvcklEJyAJPT4gJ2xvZ2luX25hbWUnLAogIAkJJ1RpdGxlJyAJPT4g
J3RpdGxlJywKICAJCSdCb2R5JwkJPT4gJ2JvZHknLAogIAkJJ0V4Y2VycHQnCT0+ICdleGNl
cnB0JywKICAJCSdLZXl3b3JkcycJPT4gJ2tleXdvcmRzJywKICAJCSdDYXRlZ29yeTEnCT0+
ICdjYXRlZ29yeTEnLAogIAkJJ0NhdGVnb3J5MicJPT4gJ2NhdGVnb3J5MicsCiAgCQknU2Vj
dGlvbicJPT4gJ3NlY3Rpb24nCiAgCSkgKyAkY3VzdG9tZmllbGRzOwoKICAJLy8gY29udHJv
bGxlcjogYnVpbGQgbmV3IGZ1bGx0ZXh0IGluZGV4IGlmIHJlcXVlc3RlZAoJJHNhdmVkID0g
ZmFsc2U7CglpZiAoZ3BzKCdzYXZlJykpIHsKICAJCSRuZXdfY29scyA9IGdwcygnY29sJyk7
CiAgCQlpZiAoIWVtcHR5KCRuZXdfY29scykpIHsKICAJCQkkbmV3X2NvbHMgPSBhcnJheV9r
ZXlzKCRuZXdfY29scyk7CgkgIAkJJGN1cnJlbnRfY29scyA9IHdldF9oYXlzdGFja2VkX2Nv
bHMoJHdldF9oYXlzdGFja19rZXlfbmFtZSk7CgkgIAkJaWYgKCFlbXB0eSgkY3VycmVudF9j
b2xzKSkgc2FmZV9hbHRlcigidGV4dHBhdHRlcm4iLCAiRFJPUCBJTkRFWCAkd2V0X2hheXN0
YWNrX2tleV9uYW1lIik7CgoJICAJCSRkb2l0ID0gYXJyYXlfZGlmZigkbmV3X2NvbHMsICRk
ZWZhdWx0X2NvbHMpICsgYXJyYXlfZGlmZigkZGVmYXVsdF9jb2xzLCAkbmV3X2NvbHMpOwoJ
ICAJCWlmICghZW1wdHkoJGRvaXQpKSB7CgkgIAkJCUBzZXRfdGltZV9saW1pdCgwKTsKCSAg
CQkJc2FmZV9hbHRlcigidGV4dHBhdHRlcm4iLCAiQUREIEZVTExURVhUICR3ZXRfaGF5c3Rh
Y2tfa2V5X25hbWUgKGAiIC4gam9pbignYCwgYCcsIGRvU2xhc2goJG5ld19jb2xzKSkgLiJg
KSIpOwoJICAJCX0KICAJCQl1cGRhdGVfbGFzdG1vZCgpOwoJICAJCXNldF9wcmVmKCdzZWFy
Y2hhYmxlX2FydGljbGVfZmllbGRzJywgam9pbignLCcsICRuZXdfY29scyksICdwdWJsaXNo
JywgMik7CgkgIAkJJHNhdmVkID0gdHJ1ZTsKICAJCX0KICAJfQoKICAJLy8gbW9kZWw6IHJl
dHJpZXZlIGN1cnJlbnQgZnVsbHRleHQgaW5kZXggZnJvbSBkYXRhYmFzZQogIAkkaW5kZXhl
ZF9jb2xzID0gd2V0X2hheXN0YWNrZWRfY29scygkd2V0X2hheXN0YWNrX2tleV9uYW1lKTsK
ICAJaWYgKGVtcHR5KCRpbmRleGVkX2NvbHMpKSAkaW5kZXhlZF9jb2xzID0gJGRlZmF1bHRf
Y29sczsKCgkvLyB2aWV3OiBzaG93IGN1cnJlbnQgZnVsbHRleHQgaW5kZXgsIHJlcXVlc3Qg
bmV3IGNvbHVtbnMKICAJcGFnZXRvcChnVHh0KCd3ZXRfaGF5c3RhY2snKSwgKCRzYXZlZCA/
IGdUeHQoJ3ByZWZlcmVuY2VzX3NhdmVkJykgOiAnJykpOwoKCWZvcmVhY2ggKCRjb2x1bW5z
IGFzICRjb2x1bW4gPT4gJGxhYmVsKSB7CgkJJGNoZWNrZWQgPSBpbl9hcnJheSgkY29sdW1u
LCAkaW5kZXhlZF9jb2xzKTsKCQkkY2hlY2tbXSA9IGdyYWYoY2hlY2tib3goImNvbFskY29s
dW1uXSIsIDEsICRjaGVja2VkLCAnJywgImNvbC0kY29sdW1uIikuIjxsYWJlbCBmb3I9J2Nv
bC0kY29sdW1uJz4iLmdUeHQoJGxhYmVsKS4iPC9sYWJlbD4iKTsKCX0KCgllY2hvICI8ZGl2
IGNsYXNzPSd3ZXRfbW9kYWwnPjwvZGl2PiIuCgkJZm9ybSgKCQluLmhlZChnVHh0KCd3ZXRf
aGF5c3RhY2tfc2VsZWN0X2NvbHVtbnMnKSwgMykuCgkJbi4nPGRpdiBpZD0id2V0X2hheXN0
YWNrX2NvbHVtbnMiPicuIC8vIHNvcnJ5LCBubyBmaWVsZHNldC4gY291bGQgbm90IG1ha2Ug
b3ZlcmZsb3c6IGF1dG8gd29yayBvbiBmaWVsZHNldHMKCQluLmpvaW4obiwgJGNoZWNrKS4K
CQluLic8L2Rpdj4nLgoJCW4uZUlucHV0KCdwbHVnaW5fcHJlZnMud2V0X2hheXN0YWNrJyku
CgkJbi5ncmFmKAoJCQlmSW5wdXQoJ3N1Ym1pdCcsICdzYXZlJywgZ1R4dCgnc2F2ZScpLCAn
c21hbGxlcmJveCcsICcnLCAnJywgJycsICcnLCAnd2V0X2hheXN0YWNrX3NhdmUnKS4KCQkJ
aHJlZihnVHh0KCdjYW5jZWwnKSwgJz9ldmVudD1wbHVnaW4nLCAnIGlkPSJ3ZXRfaGF5c3Rh
Y2tfY2FuY2VsIicpLAoJCQknIGlkPSJ3ZXRfaGF5c3RhY2tfYnV0dG9ucyInKSwKICAgICAg
ICAnJywgJycsICdwb3N0JywgJ3dldF9tb2RhbCcKCSk7Cn0KCi8qKgogKiAgUmV0dXJuIGFy
cmF5IG9mIGN1cnJlbnRseSBpbmRleGVkIGNvbHVtbiBuYW1lcwogKi8KZnVuY3Rpb24gd2V0
X2hheXN0YWNrZWRfY29scygka2V5X25hbWUpCnsKCSRpbmRleGVkX2NvbHMgPSBhcnJheSgp
OwoJJGluZGV4ZXMgPSBzYWZlX3Nob3coJ0lOREVYJywgJ3RleHRwYXR0ZXJuJyk7Cglmb3Jl
YWNoICgkaW5kZXhlcyBhcyAkaW5kZXgpIHsKCQlpZigoJGluZGV4WydJbmRleF90eXBlJ10g
PT0gJ0ZVTExURVhUJykgJiYgKCRpbmRleFsnS2V5X25hbWUnXSA9PSAka2V5X25hbWUpKSB7
CgkJCSRpbmRleGVkX2NvbHNbXSA9ICRpbmRleFsnQ29sdW1uX25hbWUnXTsKCQl9Cgl9Cgly
ZXR1cm4gJGluZGV4ZWRfY29sczsKfQoKLyoqCiAqIEJlYXV0ZnlpbmcuLi4KICovCmZ1bmN0
aW9uIHdldF9oYXlzdGFja19zdHlsZSgkZXZlbnQsICRzdGVwKQp7CgllY2hvIG4uJzxzdHls
ZSB0eXBlPSJ0ZXh0L2NzcyI+CmRpdi53ZXRfbW9kYWx7YmFja2dyb3VuZC1jb2xvcjpibGFj
aztvcGFjaXR5OjAuMjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAw
JTtoZWlnaHQ6MTAwJX0KZm9ybS53ZXRfbW9kYWx7ei1pbmRleDoxMDAwO3dpZHRoOjIwZW07
cG9zaXRpb246YWJzb2x1dGU7dG9wOjMwcHg7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6LTEwZW07
YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTtwYWRkaW5nOjIwcHg7Ym9yZGVyOjJweCBzb2xpZCAj
ZmMzO30KZm9ybS53ZXRfbW9kYWwgaDN7Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7
cGFkZGluZy1ib3R0b206MnB4fQojd2V0X2hheXN0YWNrX3NhdmUuYnVzeXtjb2xvcjojOTk5
O30KI3dldF9oYXlzdGFja19jYW5jZWx7bWFyZ2luLWxlZnQ6IDFlbTt9CiN3ZXRfaGF5c3Rh
Y2tfYnV0dG9uc3tib3JkZXItdG9wOiAxcHggc29saWQgI2RkZDtwYWRkaW5nLXRvcDo1cHg7
bWFyZ2luLXRvcDo1cHg7fQojd2V0X2hheXN0YWNrX2NvbHVtbnN7Ym9yZGVyOm5vbmU7cGFk
ZGluZzowO292ZXJmbG93OmF1dG87bWF4LWhlaWdodDozMDBweDt9Cjwvc3R5bGU+CjwhLS1b
aWYgZ3RlIElFIDVdPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPmRpdi53ZXRfbW9kYWx7Zmls
dGVyOiBhbHBoYShvcGFjaXR5ID0gMjApO308L3N0eWxlPgo8IVtlbmRpZl0tLT4nCgkubjsK
fQoKZnVuY3Rpb24gd2V0X2hheXN0YWNrX2JodnIoJGV2ZW50LCAkc3RlcCkKewoJJHNjcmlw
dCA9IDw8PEVPUwoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgokKGRvY3VtZW50
KS5yZWFkeShmdW5jdGlvbigpIHsKCSQoImlucHV0I3dldF9oYXlzdGFja19zYXZlIikuY2xp
Y2soIGZ1bmN0aW9uKCkgewoJCSQodGhpcykuYXR0cigidmFsdWUiLCAiJXdldF9oYXlzdGFj
a19wbGVhc2Vfd2FpdCUiKTsKCQkkKHRoaXMpLmFkZENsYXNzKCJidXN5Iik7CgkJcmV0dXJu
IHRydWU7Cgl9KTsKfSk7Cjwvc2NyaXB0PgoKRU9TOwoKCWVjaG8gc3RyX3JlcGxhY2UoJyV3
ZXRfaGF5c3RhY2tfcGxlYXNlX3dhaXQlJywgZ1R4dCgnd2V0X2hheXN0YWNrX3BsZWFzZV93
YWl0JyksICRzY3JpcHQpOwp9CiI7czo4OiJoZWxwX3JhdyI7czoxNTU1OiIKaDMuIFB1cnBv
c2UKClRleHRwYXR0ZXJuJ3MgZnVsbCB0ZXh0IGluZGV4IHVzZXMgdGhlIGFydGljbGVzJyBi
b2R5IGFuZCB0aXRsZSBjb250ZW50cyB0byBmaW5kIHByb3BlciBtYXRjaGVzIGZvciBzaXRl
LWludGVybmFsIHNlYXJjaGVzLgoKKndldF9oYXlzdGFjayogYWxsb3dzIHNpdGUgcHVibGlz
aGVycyB0byBtb2RpZnkgdGhpcyBkZWZhdWx0IGJlaGF2aW91ciBieSBhZGRpbmcgYWRkaXRp
b25hbCBhcnRpY2xlIGZpZWxkcyB0byB0aGUgc2V0IG9mIGluZGV4ZWQgY29udGVudC4KCmgz
LiBVc2FnZQoKTkI6IFRoaXMgcGx1Z2luIGlzIGludGVuZGVkIGZvciBUZXh0cGF0dGVybiA0
LjIuMCsuIEl0IHdpbGwgbm90IHdvcmsgd2l0aCBlYXJsaWVyIHZlcnNpb25zLiAgWW91IG5l
ZWQgdG8gYWNxdWlyZSBwdWJsaXNoZXIgcHJpdmlsZWdlcyB0byBjaGFuZ2UgYSBzaXRlJ3Mg
ZnVsbHRleHQgc2VhcmNoIHNldHRpbmdzIHdpdGggdGhpcyBwbHVnaW4uCgpoNC4gQnVpbGRp
bmcgYSBjdXN0b20gZnVsbHRleHQgaW5kZXgKCiogR28gdG8gdGhlICJ3ZXRfaGF5c3RhY2sg
b3B0aW9ucyI6P2V2ZW50PXBsdWdpbl9wcmVmcy53ZXRfaGF5c3RhY2sgcGFuZWwuCiogQ2hl
Y2sgYWxsIGFydGljbGUgZmllbGRzIHlvdSB3YW50IHRvIGluY2x1ZGUgaW4gdGhlIGZ1bGwg
dGV4dCBpbmRleC4KKiBIaXQgIlNhdmUiIGFuZCB3YWl0IGZvciB0aGUgZGF0YWJhc2UgdG8g
cmVpbmRleCB5b3UgY3VycmVudCBzaXRlJ3MgY29udGVudC4gRGVwZW5kaW5nIG9uIHRoZSBu
dW1iZXIgYW5kIGxlbmd0aCBvZiB5b3VyIGFydGljbGVzLCB0aGlzIG1heSB0YWtlIGEgd2hp
bGUuCgoqd2V0X2hheXN0YWNrKiBuZWVkcyBub3QgYmUga2VwdCBpbnN0YWxsZWQgb25jZSB0
aGUgY3VzdG9tIGZ1bGx0ZXh0IGluZGV4IGhhcyBiZWVuIGNyZWF0ZWQuCgpoNC4gUmVtb3Zp
bmcgYW4gb2Jzb2xldGUgY3VzdG9tIGZ1bGx0ZXh0IGluZGV4Cgoqd2V0X2hheXN0YWNrKiBu
ZWVkcyBvbmUgYWRkaXRpb25hbCBkYXRhYmFzZSBpbmRleCBmb3IgaXRzIG9wZXJhdGlvbiwg
d2hpY2ggaXQgY29udGludWVzIHRvIHVzZSBhcyBsb25nIGFzIHlvdSBtb2RpZnkgVGV4dHBh
dHRlcm4ncyBkZWZhdWx0IGZ1bGx0ZXh0IGluZGV4IHNldHRpbmdzLiBUaGlzIGN1c3RvbSBm
dWxsdGV4dCBpbmRleCB3aWxsIGJlIGRlbGV0ZWQgd2hlbiB0aGUgY3VzdG9taXNlZCBzZXR0
aW5nIG1hdGNoZXMgVGV4dHBhdHRlcm4ncyBkZWZhdWx0IHNldHRpbmcgKGkuZS4gIlRpdGxl
IiBhbmQgIkJvZHkiIGFyZSB0aGUgc29sZWx5IGNoZWNrZWQgcHJvcGVydGllcykuCgpoMy4g
QWRkaXRpb25hbCBpbmZvcm1hdGlvbgoKVmlzaXQgdGhlICJ3ZXRfaGF5c3RhY2sgZG9jdW1l
bnRhdGlvbiBwYWdlIjpodHRwOi8vYXdhc3Rlb2Z3b3Jkcy5jb20vc29mdHdhcmUvd2V0X2hh
eXN0YWNrLXRleHRwYXR0ZXJuLXBsdWdpbi4KCmgzLiBMaWNlbmNlCgpUaGlzIHBsdWdpbiBp
cyByZWxlYXNlZCB1bmRlciB0aGUgIkdudSBHZW5lcmFsIFB1YmxpYyBMaWNlbmNlIjpodHRw
Oi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLnR4dC4KIjtzOjM6Im1kNSI7czozMjoiZmNi
OWQxZGRjMjQ1Zjk0Yzc4OTMyY2I5MjIwYWI4OGQiO30=
